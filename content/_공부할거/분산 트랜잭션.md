- 여러 DB/서비스에 걸쳐 수행되는 트랜잭션이다.
- 작업이 모두 **바로** 성공하거나 실패해야 하므로, [[최종일관성|결과적 일관성]]과 대치되는 개념이다.
- 이 경우 단일 DB의 로컬 트랜잭션과 다르게, [[ACID]] 속성을 보장하기 어려워진다.
### 왜 ACID를 보장하지 못하는가?
단순히 생각하면 다음처럼 코드를 작성하면 될 것 같다.
```text
method {
	system1.doSomething()
	system1.commit()
	if (system1.noError()) {
		system2.doSomething()
		system2.commit()
		if (!system2.noError()) {
			system2.rollback()
			system1.rollback()
		}
	} else {
		system1.rollback()
	}
}
```
하지만 실제로는 네트워크 지연이나 롤백 자체의 실패 등으로 ACID 속성을 지키기 어렵다.
- system1 성공 -> system2 실패 -> system2 롤백 -> system1 롤백 시도중 실패
- system1 성공 -> system2 성공했으나 성공했다는 응답이 유실 -> system1 실패
- ... 수많은 실패 케이스
따라서 검증된 방식을 선택하거나, 실시간성이 필요없는 경우에는 [[최종일관성|결과적 일관성]]을 활용하는 것이 좋다.
## 주요 구현 방식
### Two-Phase Commit
- 코디네이터(트랜잭션 관리자) 개념이 존재한다.
- 다음과 같은 단계로 진행된다.
	1. 각 시스템에서 작업을 수행한다. 각 시스템은 작업이 완료되면 코디네이터에게 이를 알린다.
	2. 코디네이터가 모든 시스템이 작업이 완료되었다는 것을 확인하면 `Phase1`을 시작한다.
	3. `Phase1`
		1. 코디네이터는 모든 시스템에게 커밋할 준비가 되었냐고 물어본다.
		2. 각 시스템은 커밋할 준비가 되었다고 응답한다.
		3. 하나라도 커밋할 준비가 되지 않았다면 모두 롤백한다.
		4. 모두 커밋할 준비가 되었다면 `Phase2`를 시작한다.
	4. `Phase2`
		1. 