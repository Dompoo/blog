# 동일한 타입의 의존관계 주입

작성일: 2025년 4월 7일 오후 5:38
카테고리: Spring Core

자동 의존관계 주입을 통해 의존관계를 주입받을 때, 해당 타입의 객체가 여러개인 상황이다.

`MemberRepository` 의 구현체가 `MemoryMemberRepository` , `DatabaseMemberRepository` 두개이고, 둘다 빈 등록이 된 상황이다.

그냥 실행하면 예외가 발생하며 꺼진다. 무엇을 주입할지 선택해야 한다.

# 빈을 선택하는 방법

- `@Qualifier` 매칭 : 컴포넌트에도 해당 애노테이션을, 의존성 주입에도 해당 애노테이션을 붙여서 매칭시켜준다.
    - 특정 상황에서 사용하는 서브 구현체를 선택할 때 사용하면 좋다.
- `@Primary` 매칭 : 여러 빈 중 `@Primary` 가 붙은 빈이 주입된다. 쉽고 간편하다.
    - 기본적인 구현체를 선택할 때 사용하면 좋다.
- 둘 중에 `@Primary` 가 우선권을 가진다. 기본적으로 사용하다가, 필요한 곳에서만 `@Qualifier` 를 붙여주면 된다.

# 모두 필요하다면

- 컬렉션에 의존성을 주입받도록 하면 해당 타입의 모든 빈을 받아볼 수 있다.
- 다형성을 잘 활용하는 로직에서 활용해볼만 하다. (그런가?)