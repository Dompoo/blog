# OSIV

작성일: 2025년 5월 14일 오후 1:03
카테고리: JPA

- 원래는 `영속성 컨텍스트`의 생명주기가 트랜잭션에 한정되었다.
- 하지만 그럴 경우에 `Application Service` 에서 엔티티를 반환하면, 컨트롤러에서 조회가 안된다.
    - `영속성 컨텍스트`가 이미 사라졌기 때문에, 지연 로딩이 적용이 지원되지 않기 때문이다.
- 이것을 해결하기 위해 `open-session-in-view` 옵션을 제공한다.
    - 활성화하면 view에서도 `EntityManager`가 살아있다.
        - 지연로딩도 적용된다.
    - **스프링에서는 기본적으로 활성화 되어있다.**
- 하지만 OSIV는 성능 저하를 유발한다.
    - 예상치 못한 N+1 문제를 만나게 될 수도 있다.
    - DB 커넥션을 오래 점유하게 된다.